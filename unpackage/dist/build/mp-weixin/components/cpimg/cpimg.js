(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/cpimg/cpimg"],{"0169":function(t,e,i){"use strict";i.r(e);var n=i("66af"),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=r.a},"0486":function(t,e,i){"use strict";i.r(e);var n=i("b5fa"),r=i("0169");for(var a in r)"default"!==a&&function(t){i.d(e,t,(function(){return r[t]}))}(a);i("791e");var s,h=i("f0c5"),o=Object(h["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=o.exports},1288:function(t,e,i){},"66af":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=[],n="",r=0,a={name:"cpimg",props:{maxWidth:{type:Number,default:750},type:{type:String,default:"url"},ql:{type:Number,default:.92},src:{type:String,default:""},number:{type:Number,default:1},fixOrientation:{type:Boolean,default:!0},size:{type:Number,default:5e5}},data:function(){return{cWidth:750,cHeight:750}},onUnload:function(){},methods:{_changImg:function(){var e=this;""==e.src?t.chooseImage({count:e.number,sizeType:["compressed"],success:function(t){i=[],n=t.tempFilePaths,r=0,e._cpImg()},fail:function(t){e._err(t)}}):_cpImg(e.src)},_cpImg:function(){var e=this,i=n[r];function a(n,r){if(n.type.indexOf("png")>=0)return e._result(i),!1;var a,s,h=n.width,o=n.height,u=1,c=1;(r/1024>=e.size||n.width>=e.maxWidth)&&(n.width>=n.height&&n.width>=e.maxWidth?(n.height=e.maxWidth*n.height/n.width,n.width=e.maxWidth):n.width<n.height&&n.height>=e.maxWidth&&(n.width=e.maxWidth*n.width/n.height,n.height=e.maxWidth),u=n.width/h,c=n.height/o),a=h*u,s=o*c;var d=t.createCanvasContext("_myCanvas",e);if(e.cWidth=n.width,e.cHeight=n.height,e.fixOrientation){var f=n.orientation;[5,6,7,8,"right","left","right-mirrored","left-mirrored"].indexOf(f)>-1&&(e.cWidth=n.height,e.cHeight=n.width),2==f||"up-mirrored"==f?(d.translate(a,0),d.scale(-1,1)):3==f||"down"==f?(d.translate(a,s),d.rotate(Math.PI)):4==f||"down-mirrored"==f?(d.translate(0,s),d.scale(1,-1)):5==f||"right-mirrored"==f?(d.rotate(.5*Math.PI),d.scale(1,-1)):6==f||"right"==f?(d.rotate(.5*Math.PI),d.translate(0,-s)):7==f||"left-mirrored"==f?(d.rotate(.5*Math.PI),d.translate(a,-s),d.scale(-1,1)):8==f||"left"==f?(d.rotate(-.5*Math.PI),d.translate(-a,0)):d.translate(0,0)}var l=0;function g(){var t=e.maxWidth/5;return t>=600?600:t<=100?100:t}l=10,setTimeout((function(){d.drawImage(i,0,0,a,s),d.draw(!1,(function(){var i=0;i=g(),setTimeout((function(){t.canvasToTempFilePath({width:Number(e.cWidth),height:Number(e.cHeight),destWidth:Number(e.cWidth),destHeight:Number(e.cHeight),canvasId:"_myCanvas",fileType:"jpg",quality:Number(e.ql),success:function(t){if("base64"==e.type){var i="";i="data:image/jpeg;base64,"+wx.getFileSystemManager().readFileSync(t.tempFilePath,"base64"),e._result(i)}else e._result(t.tempFilePath)},fail:function(t){e._err(t)}},e)}),i)}))}),l)}t.showLoading({title:"图片加载中。。。",mask:!0}),t.getImageInfo({src:i,success:function(n){t.getFileInfo({filePath:i,success:function(t){a(n,t.size)},fail:function(t){e._err(t)}})},fail:function(t){e._err(t)}})},_reverseImgData:function(t){for(var e=t.width,i=t.height,n=0,r=0;r<i/2;r++)for(var a=0;a<4*e;a++)n=t.data[r*e*4+a],t.data[r*e*4+a]=t.data[(i-r-1)*e*4+a],t.data[(i-r-1)*e*4+a]=n;return t},_getH5ImageInfo:function(t,e){var i=new Image;i.src=t,i.onload=function(i){var n=this,r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=function(t){var i=this;if(200==i.status||0===i.status){var r=new FileReader;r.onload=function(t){var r=new DataView(this.result);if(65496!=r.getUint16(0,!1))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1});var a=r.byteLength,s=2;while(s<a){var h=r.getUint16(s,!1);if(s+=2,65505==h){if(1165519206!=r.getUint32(s+=2,!1))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1});var o=18761==r.getUint16(s+=6,!1);s+=r.getUint32(s+4,o);var u=r.getUint16(s,o);s+=2;for(var c=0;c<u;c++)if(274==r.getUint16(s+12*c,o))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:r.getUint16(s+12*c+8,o)})}else{if(65280!=(65280&h))break;s+=r.getUint16(s,!1)}}return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1})},r.readAsArrayBuffer(i.response)}},r.send()}},_result:function(e,a){i.push(e),r+=1,n.length-1>=r?this._cpImg():(t.hideLoading(),this.$emit("result",i))},_err:function(e){t.hideLoading(),this.$emit("err",e)}}};e.default=a}).call(this,i("543d")["default"])},"791e":function(t,e,i){"use strict";var n=i("1288"),r=i.n(n);r.a},b5fa:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var r=function(){var t=this,e=t.$createElement;t._self._c},a=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/cpimg/cpimg-create-component',
    {
        'components/cpimg/cpimg-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("0486"))
        })
    },
    [['components/cpimg/cpimg-create-component']]
]);
