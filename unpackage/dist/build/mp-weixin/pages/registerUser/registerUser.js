(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/registerUser/registerUser"],{"0694":function(t,e,n){},"0d51":function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={cpimg:function(){return n.e("components/cpimg/cpimg").then(n.bind(null,"0486"))}},s=function(){var t=this,e=t.$createElement;t._self._c},o=[]},1178:function(t,e,n){"use strict";n.r(e);var i=n("0d51"),s=n("443a");for(var o in s)"default"!==o&&function(t){n.d(e,t,(function(){return s[t]}))}(o);n("d991");var a,r=n("f0c5"),c=Object(r["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);e["default"]=c.exports},"443a":function(t,e,n){"use strict";n.r(e);var i=n("b851"),s=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=s.a},"56cc":function(t,e,n){"use strict";(function(t){n("837d");i(n("66fd"));var e=i(n("1178"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},b851:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i(n("3dff"));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){n.e("components/cpimg/cpimg").then(function(){return resolve(n("0486"))}.bind(null,n)).catch(n.oe)},o={components:{cpimg:s},data:function(){return{imgUrl:getApp().globalData.imgUrl,btnTrue:!1,sfzzmimg:"",sfzfmimg:"",imgSta:"",username:"",userno:"",tel:"",password:"",code:"",codebtn:"发送验证码",yzminput:!0,disabled:!1}},methods:{usernameFun:function(t){this.username=t.detail.value,""!=this.sfzzmimg&&""!=this.sfzfmimg&&""!=this.username&&""!=this.userno&&""!=this.tel&&""!=this.password&&""!=this.code&&(this.btnTrue=!0)},usernoFun:function(t){this.userno=t.detail.value,""!=this.sfzzmimg&&""!=this.sfzfmimg&&""!=this.username&&""!=this.userno&&""!=this.tel&&""!=this.password&&""!=this.code&&(this.btnTrue=!0)},phone:function(e){var n=e.detail.value,i=/^[1][3,4,5,7,8][0-9]{9}$/;if(!i.test(n))return t.showToast({title:"手机号码格式不正确",icon:"none",duration:2e3}),!1;this.tel=e.detail.value,""!=this.sfzzmimg&&""!=this.sfzfmimg&&""!=this.username&&""!=this.userno&&""!=this.tel&&""!=this.password&&""!=this.code&&(this.btnTrue=!0)},getPwd:function(e){e.detail.value.length<6?t.showToast({title:"请输入6位数以上的密码",icon:"none"}):(this.password=e.detail.value,""!=this.sfzzmimg&&""!=this.sfzfmimg&&""!=this.username&&""!=this.userno&&""!=this.tel&&""!=this.password&&""!=this.code&&(this.btnTrue=!0))},getCode:function(t){this.code=t.detail.value,""!=this.sfzzmimg&&""!=this.sfzfmimg&&""!=this.username&&""!=this.userno&&""!=this.tel&&""!=this.password&&""!=this.code&&(this.btnTrue=!0)},getCode1:function(){t.showToast({title:"请先发送验证码",icon:"none"})},sendcode:function(){var e=this,n=e.tel;if(""!=n){t.showToast({title:"验证码已发送.请注意接收",icon:"none"});var i=60,s=setInterval((function(){i--,i>0?(e.codebtn=i,e.disabled=!0,e.yzminput=!1):(e.codebtn="发送验证码",e.disabled=!1,e.yzminput=!1,clearInterval(s))}),1e3)}else t.showToast({title:"请输入手机号",icon:"none"})},uploadImg:function(t){var e=this;e.imgSta=t.currentTarget.dataset.index,e.$refs.cpimg._changImg()},cpimgOk:function(t){var e=this;e.upload_file(getApp().globalData.uploadUrl,t[0])},cpimgErr:function(e){t.showToast({icon:"none",title:e})},upload_file:function(e,n){var i=this;console.log("url",e,n),t.uploadFile({url:e,filePath:n,name:"file",header:{"content-type":"multipart/form-data"},success:function(e){t.hideLoading(),console.log("上传成功res1",e.data),console.log("上传成功res",JSON.parse(e.data).data.url);var n=JSON.parse(e.data);if(200==n.code){var s=n.data.url;1==i.imgSta?i.yzsFun(getApp().globalData.sfzUrl,s,"front"):2==i.imgSta&&i.yzsFun(getApp().globalData.sfzUrl,s,"back")}else t.showToast({icon:"none",title:e.data.msg})},fail:function(e){t.hideLoading(),t.showToast({icon:"none",title:"网络错误"})}})},yzsFun:function(e,n,i){var s=this;t.request({url:e,data:{access_token:t.getStorageSync("bdaccess-token"),url:n,id_card_side:i},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){t.hideLoading(),console.log("111222",e.data),"normal"==e.data.image_status?(1==s.imgSta?(s.sfzzmimg=n,s.username=e.data.words_result.姓名.words,s.userno=e.data.words_result.公民身份号码.words):2==s.imgSta&&(s.sfzfmimg=n),""!=s.sfzzmimg&&""!=s.sfzfmimg&&""!=s.username&&""!=s.userno&&""!=s.tel&&""!=s.password&&""!=s.code&&(s.btnTrue=!0)):t.showToast({title:"请上传正确的图片",icon:"none"})},fail:function(){t.hideLoading(),t.showToast({title:"网络错误",icon:"none"})}})},goLogin:function(){var e=this;if(""==e.sfzzmimg)return t.showToast({title:"请上传身份证人像面",icon:"none"}),!1;if(""==e.sfzfmimg)return t.showToast({title:"请上传身份证国徽面",icon:"none"}),!1;if(""==e.username)return t.showToast({title:"请输入姓名",icon:"none"}),!1;if(""==e.userno)return t.showToast({title:"请输入身份证号",icon:"none"}),!1;if(""==e.tel)return t.showToast({title:"请输入手机号",icon:"none"}),!1;if(""==e.password)return t.showToast({title:"请输入密码",icon:"none"}),!1;if(""==e.code||isNaN(e.code)||4!=e.code.length)t.showToast({title:"验证码格式不正确",icon:"none"});else{var n=t.getStorageSync("carIfo");console.log("obj",n),this.$http.sendRequest("/reg/toreg","POST",{caimg:this.sfzzmimg,cfimg:this.sfzfmimg,climg:n.carimg,jszimg:n.jszimg,jszfimg:n.jszfimg,xszing:n.xszimg,xszfimg:n.xszfimg,loginName:this.tel,password:this.password,code:this.code,username:this.username,idcard:this.userno,jsno:n.jsno,carktime:n.carktime,carjtime:n.carjtime,xszno:n.xszno,cno:n.cno,clype:n.clype,xztype:n.xztype,pname:n.pname,fdjno:n.fdjno,vin:n.clsbno,starttime:n.starttime,endtime:n.endtime}).then((function(e){200==e.data.code?t.showToast({title:"注册成功",icon:"success",duration:2e3,success:function(){setTimeout((function(){t.redirectTo({url:"../../pages/login/login"})}),2e3)}}):500==e.data.code?t.showToast({icon:"none",title:"手机已注册过"}):t.showToast({icon:"none",title:"用户名或密码错误"})})).catch((function(e){t.showToast({icon:"none",title:"网络错误"})}))}}},onLoad:function(){}};e.default=o}).call(this,n("543d")["default"])},d991:function(t,e,n){"use strict";var i=n("0694"),s=n.n(i);s.a}},[["56cc","common/runtime","common/vendor"]]]);